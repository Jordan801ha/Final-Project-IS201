<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Dirt Bike Maze</title>
<style>
  :root{
    --bike-cursor: url('assets/dirtbike-cursor.png') 16 16, crosshair;
    --ktm:#ff6600; --dark:#0c0c0c; --panel:#111; --wall:#2c2c2c;
    --good:#22c55e; --bad:#ef4444;
  }
  *{box-sizing:border-box}
  html,body{height:100%;margin:0;background:#0b0b0b;color:#e9e9e9;font-family:system-ui,Arial,sans-serif}
  .page{min-height:100%;display:flex;flex-direction:column;align-items:center;gap:16px;padding:20px 16px 40px;cursor:var(--bike-cursor)}
  header{text-align:center}
  header h1{margin:4px 0 2px;font-size:clamp(22px,3.5vw,36px);letter-spacing:1px}
  header p{margin:0;opacity:.85;font-size:14px}
  .hud{display:flex;gap:12px;flex-wrap:wrap;align-items:center;justify-content:center}
  .pill{background:rgba(255,255,255,.08);border:1px solid rgba(255,255,255,.15);padding:6px 10px;border-radius:999px}
  .btn{border:0;border-radius:8px;padding:8px 12px;background:var(--ktm);color:#111;font-weight:800;cursor:pointer}
  .btn:active{transform:translateY(1px)}
  .maze-wrap{width:min(900px,92vw);aspect-ratio:16/9;background:#0e0e10;border:1px solid #242424;border-radius:14px;box-shadow:0 18px 50px rgba(0,0,0,.45),inset 0 0 0 1px rgba(255,255,255,.05);position:relative;overflow:hidden}
  .track{position:absolute;inset:12px;background:linear-gradient(#0b1226,#0a1328);border-radius:10px;border:1px solid #1c1c1c;box-shadow:inset 0 0 0 2px #000}
  /* Visual path strips (do NOT block mouse) */
  .path{position:absolute;background:#0f172a;border-radius:8px;opacity:.85;pointer-events:none}
  .p1{left:18px;top:18px;width:calc(100% - 36px);height:90px}
  .p2{left:18px;top:108px;width:90px;height:calc(100% - 198px)}
  .p3{left:108px;bottom:108px;width:calc(100% - 198px);height:90px}
  .p4{right:18px;top:198px;width:90px;height:calc(100% - 306px)}

  /* Hit walls (these MUST be above everything) */
  .wall{position:absolute;background:var(--wall);border:1px solid #000;box-shadow:inset 0 0 12px rgba(0,0,0,.65);z-index:5;pointer-events:auto}
  /* top corridor */
  .w1{left:18px;top:18px;width:calc(100% - 36px);height:14px}
  .w2{left:18px;top:94px;width:calc(100% - 36px);height:14px}
  .w3{left:18px;top:18px;width:14px;height:90px}
  .w4{right:18px;top:18px;width:14px;height:180px}
  /* left vertical */
  .w5{left:18px;top:108px;width:90px;height:14px}
  .w6{left:94px;top:108px;width:14px;height:calc(100% - 216px)}
  .w7{left:18px;bottom:108px;width:90px;height:14px}
  /* bottom horiz */
  .w8{left:108px;bottom:108px;width:calc(100% - 216px);height:14px}
  .w9{left:108px;bottom:18px;width:calc(100% - 216px);height:14px}
  /* right vertical to finish */
  .w10{right:18px;top:198px;width:14px;height:calc(100% - 306px)}
  .w11{right:108px;top:198px;width:14px;height:calc(100% - 306px)}
  .w12{right:18px;bottom:198px;width:90px;height:14px}

  /* Zones */
  .zone{position:absolute;display:grid;place-items:center;font-weight:900;letter-spacing:.5px;text-transform:uppercase;border-radius:8px;padding:.2rem 0;user-select:none;z-index:6}
  .start{left:18px;top:18px;width:110px;height:60px;background:#073b18;color:#b9ffd0;border:1px solid #0a8a3b}
  .finish{right:18px;bottom:18px;width:130px;height:70px;background:#3b0712;color:#ffd1d8;border:1px solid #a30b2c}

  .status{position:absolute;right:12px;bottom:12px;background:rgba(0,0,0,.6);color:#fff;padding:8px 10px;border-radius:8px;font-size:13px;border:1px solid rgba(255,255,255,.12);z-index:7}
  .status.ok{outline:2px solid var(--good)}
  .status.fail{outline:2px solid var(--bad)}
</style>
</head>
<body>
  <div class="page">
    <header>
      <h1>Mouse Ability MAZE (MAM)</h1>
      <p>Move your cursor from <strong>START</strong> to <strong>FINISH</strong> without touching the Gray walls.</p>
    </header>

    <div class="hud">
      <span class="pill">‚è±Ô∏è Time: <strong id="time">0.00s</strong></span>
      <span class="pill">üèÅ Best: <strong id="best">‚Äî</strong></span>
      <button class="btn" id="resetBtn">Reset</button>
      <a class="pill" href="Scratch.html" style="text-decoration:none;color:#fff;">‚Üê Back to Scratch Page</a>
    </div>

    <div class="maze-wrap" id="maze">
      <div class="track">
        <!-- Visual path -->
        <div class="path p1"></div>
        <div class="path p2"></div>
        <div class="path p3"></div>
        <div class="path p4"></div>

        <!-- Start / Finish -->
        <div class="zone start" id="start">Start</div>
        <div class="zone finish" id="finish">Finish</div>

        <!-- Walls (hitboxes) -->
        <div class="wall w1"></div><div class="wall w2"></div><div class="wall w3"></div><div class="wall w4"></div>
        <div class="wall w5"></div><div class="wall w6"></div><div class="wall w7"></div>
        <div class="wall w8"></div><div class="wall w9"></div>
        <div class="wall w10"></div><div class="wall w11"></div><div class="wall w12"></div>

        <div class="status" id="status">Hover START to begin</div>
      </div>
    </div>
  </div>

<script>
  // --- Game state ---
  let started = false, finished = false, startTime = 0, timerId = null;
  const timeEl = document.getElementById('time');
  const bestEl = document.getElementById('best');
  const statusEl = document.getElementById('status');
  const maze = document.getElementById('maze');
  const startZone = document.getElementById('start');
  const finishZone = document.getElementById('finish');
  const walls = Array.from(document.querySelectorAll('.wall'));

  // Load best time
  const BEST_KEY = 'maze_best_time_v1';
  let best = Number(localStorage.getItem(BEST_KEY));
  if (!isFinite(best)) best = null;
  bestEl.textContent = best ? best.toFixed(2) + 's' : '‚Äî';

  function start() {
    started = true; finished = false;
    startTime = performance.now();
    updateTimer();
    statusEl.textContent = 'Riding‚Ä¶ stay on the path!';
    statusEl.classList.remove('fail','ok');
  }

  function win() {
    if (!started || finished) return;
    finished = true; clearInterval(timerId);
    const t = (performance.now() - startTime) / 1000;
    statusEl.textContent = 'üèÜ Finished in ' + t.toFixed(2) + 's';
    statusEl.classList.add('ok'); statusEl.classList.remove('fail');
    if (!best || t < best) {
      best = t; localStorage.setItem(BEST_KEY, String(best));
      bestEl.textContent = best.toFixed(2) + 's';
    }
  }

  function crash(msg='üí• You hit a wall!') {
    if (!started || finished) return;
    finished = false; started = false; clearInterval(timerId);
    statusEl.textContent = msg + ' Hover START to try again.';
    statusEl.classList.add('fail'); statusEl.classList.remove('ok');
    timeEl.textContent = '0.00s';
  }

  function updateTimer() {
    clearInterval(timerId);
    timerId = setInterval(() => {
      if (!started || finished) return;
      const t = (performance.now() - startTime) / 1000;
      timeEl.textContent = t.toFixed(2) + 's';
    }, 50);
  }

  // Events
  startZone.addEventListener('mouseenter', () => {
    if (!started) start();
  });

  finishZone.addEventListener('mouseenter', win);

  walls.forEach(w => {
    w.addEventListener('mouseenter', () => crash());
  });

  // Leaving the maze is a crash (prevents cheating)
  maze.addEventListener('mouseleave', () => {
    if (started && !finished) crash('üí• Off track!');
  });

  document.getElementById('resetBtn').addEventListener('click', () => {
    started = false; finished = false; clearInterval(timerId);
    timeEl.textContent = '0.00s';
    statusEl.textContent = 'Hover START to begin';
    statusEl.classList.remove('fail','ok');
  });
</script>
</body>
</html>
